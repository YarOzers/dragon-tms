<div class="header">
  <div fxLayout="row" fxLayoutAlign="center-center">
    <span fxFlex="6">{{testCase.id}}</span>
    <input type="text" fxFlex="96">
  </div>
</div>
<div>
  <mat-sidenav-container class="sidenav-container" fxFlex>
    <mat-sidenav #sidenav mode="side" opened>
      <mat-nav-list>
        <mat-list-item>Сайдбар элемент 1</mat-list-item>
        <mat-list-item>Сайдбар элемент 2</mat-list-item>
        <mat-list-item>Сайдбар элемент 3</mat-list-item>
      </mat-nav-list>
    </mat-sidenav>

    <mat-sidenav-content>
    <button mat-icon-button (click)="toggleSidenav()">
      <mat-icon>{{ sidenav.opened ? 'close' : 'menu' }}</mat-icon>
    </button>

    <div class="step-container" fxLayout="column">
      <div class="steps">
        <div>
          <mat-checkbox [(ngModel)]="allSelectedPreConditions" [indeterminate]="indeterminatePreCondition" (change)="selectAllPreconditions($event.checked)">
            Предусловия
          </mat-checkbox>
        </div>
        <div style="background-color: #7abb6c">
          <div *ngFor="let step of preconditions" fxLayout="row">
            <mat-checkbox [(ngModel)]="step.selected" (change)="updateAllSelectedPreconditions()" fxFlex="6"></mat-checkbox>
            <textarea [(ngModel)]="step.action" placeholder="Действие" fxFlex="47" (input)="autoResize($event)"></textarea>
            <textarea [(ngModel)]="step.expectedResult" placeholder="Ожидаемый результат" fxFlex="47"
                      (input)="autoResize($event)"></textarea>
          </div>
          <div fxLayout="row" fxLayoutAlign="end center">
            <button mat-icon-button (click)="addPreCondition()">
              <mat-icon>add</mat-icon>
            </button>
            <button mat-icon-button (click)="deleteSelectedPreconditions()">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>

      <div class="steps">
        <div>
          <mat-checkbox [(ngModel)]="allSelectedSteps" [indeterminate]="indeterminateSteps" (change)="selectAllSteps($event.checked)">
            Шаги
          </mat-checkbox>
        </div>
        <div style="background-color: #7abb6c">
          <div *ngFor="let step of steps" fxLayout="row">
            <mat-checkbox [(ngModel)]="step.selected" (change)="updateAllSelectedSteps()" fxFlex="6"></mat-checkbox>
            <textarea [(ngModel)]="step.action" placeholder="Действие" fxFlex="47" (input)="autoResize($event)"></textarea>
            <textarea [(ngModel)]="step.expectedResult" placeholder="Ожидаемый результат" fxFlex="47"
                      (input)="autoResize($event)"></textarea>
          </div>
          <div fxLayout="row" fxLayoutAlign="end center">
            <button mat-icon-button (click)="addStep()">
              <mat-icon>add</mat-icon>
            </button>
            <button mat-icon-button (click)="deleteSelectedSteps()">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>

      <div class="steps">
        <div>
          <mat-checkbox [(ngModel)]="allSelectedPostConditions" [indeterminate]="indeterminatePostCondition" (change)="selectAllPostConditions($event.checked)">
            Постусловия
          </mat-checkbox>
        </div>
        <div style="background-color: #7abb6c">
          <div *ngFor="let step of postConditions" fxLayout="row">
            <mat-checkbox [(ngModel)]="step.selected" (change)="updateAllSelectedPostConditions()" fxFlex="6"></mat-checkbox>
            <textarea [(ngModel)]="step.action" placeholder="Действие" fxFlex="47" (input)="autoResize($event)"></textarea>
            <textarea [(ngModel)]="step.expectedResult" placeholder="Ожидаемый результат" fxFlex="47"
                      (input)="autoResize($event)"></textarea>
          </div>
          <div fxLayout="row" fxLayoutAlign="end center">
            <button mat-icon-button (click)="addPostCondition()">
              <mat-icon>add</mat-icon>
            </button>
            <button mat-icon-button (click)="deleteSelectedPostConditions()">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
</div>
